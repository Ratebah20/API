<!-- Étapes 1 à 4 du guide d'intégration -->

<!-- Étape 1 -->
<div x-data="{ open: false }" class="border rounded-lg overflow-hidden mb-4">
    <div @click="open = !open" class="bg-orange-100 p-4 cursor-pointer flex justify-between items-center">
        <h3 class="text-lg font-semibold text-orange-700">{{ _("Étape 1 : Base URL et vérifications initiales") }}</h3>
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v11.586l4.293-4.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 15.586V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 17a1 1 0 01-1-1V4.414l-4.293 4.293a1 1 0 11-1.414-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 11-1.414 1.414L11 4.414V16a1 1 0 01-1 1z" clip-rule="evenodd" />
        </svg>
    </div>
    <div x-show="open" class="p-6 bg-white">
        <p class="text-gray-700 mb-4">
            {{ _("Utilisez systématiquement la Base URL suivante pour toutes les requêtes à l'API Orange Travel B2B Sandbox") }}
        </p>
        
        <div class="bg-gray-100 p-3 rounded-lg mb-4 font-mono text-sm overflow-x-auto">
            https://api.orange.com/travel-b2b-sandbox/v1/
        </div>
        
        <h4 class="text-md font-semibold text-gray-800 mt-6 mb-2">{{ _("Test de connexion") }}</h4>
        <p class="text-gray-700 mb-3">
            {{ _("Vous pouvez facilement vérifier que votre connexion à l'API fonctionne avec l'endpoint") }} <code>/live</code>. 
            {{ _("Cet endpoint vous permettra également de connaître la version de l'API.") }}
        </p>
        
        <div class="bg-gray-800 text-green-300 p-4 rounded-lg mb-4 font-mono text-sm overflow-x-auto">
            <p># {{ _("Requête") }}</p>
            <p>GET /live</p>
            <p>Authorization: Bearer {access_token}</p>
            <p></p>
            <p># {{ _("Réponse attendue") }}</p>
            <p>{</p>
            <p>&nbsp;&nbsp;"isAlive": true,</p>
            <p>&nbsp;&nbsp;"version": "1.7.X"</p>
            <p>}</p>
        </div>
        
        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
            <h5 class="text-blue-700 font-medium mb-1">{{ _("Documentation API") }}</h5>
            <p class="text-gray-700">
                {{ _("Selon la documentation OpenAPI, cet endpoint est décrit comme") }} <code>operationId: isAlive</code> {{ _("dans le tag") }} <code>Frontoffice</code>.
            </p>
        </div>
        
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
            <h5 class="text-yellow-700 font-medium mb-1">{{ _("Résolution d'erreurs courantes") }}</h5>
            <p class="text-gray-700">
                {{ _("Si vous obtenez une erreur 404 NOT FOUND, vérifiez que vous utilisez bien la base URL complète et correcte mentionnée ci-dessus.") }}
            </p>
        </div>
    </div>
</div>

<!-- Étape 2 -->
<div x-data="{ open: false }" class="border rounded-lg overflow-hidden mb-4">
    <div @click="open = !open" class="bg-orange-100 p-4 cursor-pointer flex justify-between items-center">
        <h3 class="text-lg font-semibold text-orange-700">{{ _("Étape 2 : Compréhension des entités principales") }}</h3>
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v11.586l4.293-4.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 15.586V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 17a1 1 0 01-1-1V4.414l-4.293 4.293a1 1 0 11-1.414-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 11-1.414 1.414L11 4.414V16a1 1 0 01-1 1z" clip-rule="evenodd" />
        </svg>
    </div>
    <div x-show="open" class="p-6 bg-white">
        <p class="text-gray-700 mb-4">
            {{ _("Pour intégrer efficacement l'API Orange Travel B2B, il est essentiel de comprendre les trois entités principales qui la composent.") }}
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <!-- Produit -->
            <div class="bg-orange-50 p-4 rounded-lg">
                <h5 class="font-semibold text-orange-700 mb-2">1. {{ _("Produit") }}</h5>
                <p class="text-sm text-gray-700 mb-2">{{ _("L'article disponible à la vente pour le client final.") }}</p>
                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                    <li>{{ _("Recharge mobile (topup) : crédit, données, minutes") }}</li>
                    <li>{{ _("eSIM : SIM dématérialisée activable directement") }}</li>
                    <li>{{ _("Fourni par Orange avec des informations prédéfinies") }}</li>
                    <li>{{ _("Associé à une zone de couverture, un fournisseur et des caractéristiques techniques") }}</li>
                </ul>
            </div>
            
            <!-- Offre -->
            <div class="bg-blue-50 p-4 rounded-lg">
                <h5 class="font-semibold text-blue-700 mb-2">2. {{ _("Offre") }}</h5>
                <p class="text-sm text-gray-700 mb-2">{{ _("La liaison commerciale entre un produit et le distributeur.") }}</p>
                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                    <li>{{ _("Prix de revente fixé par Orange au distributeur") }}</li>
                    <li>{{ _("Frais additionnels personnalisables") }}</li>
                    <li>{{ _("Métadonnées supplémentaires personnalisables") }}</li>
                    <li>{{ _("Stock disponible (bucket) pour le distributeur") }}</li>
                </ul>
            </div>
            
            <!-- Transaction -->
            <div class="bg-green-50 p-4 rounded-lg">
                <h5 class="font-semibold text-green-700 mb-2">3. {{ _("Transaction") }}</h5>
                <p class="text-sm text-gray-700 mb-2">{{ _("Une opération d'achat concrète effectuée par un client.") }}</p>
                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                    <li>{{ _("Enregistre chaque opération de vente") }}</li>
                    <li>{{ _("Contient les informations pour l'exécution") }}</li>
                    <li>{{ _("Facilite le suivi des ventes réalisées") }}</li>
                    <li>{{ _("Permet la traçabilité des opérations") }}</li>
                </ul>
            </div>
        </div>
        
        <h4 class="text-md font-semibold text-gray-800 mt-6 mb-3">{{ _("Fonctionnement global") }}</h4>
        <p class="text-gray-700 mb-4">
            {{ _("Le processus général implique que le distributeur consulte d'abord les offres disponibles, puis génère des transactions spécifiques lorsqu'un client effectue un achat. Chaque transaction est suivie et détaillée pour garantir une traçabilité et une gestion simplifiée.") }}
        </p>
        
        <div class="bg-gray-100 p-4 rounded-lg mb-4">
            <h5 class="font-medium text-gray-800 mb-2">{{ _("Principaux endpoints liés aux entités") }}</h5>
            <div class="bg-gray-800 text-green-300 p-3 rounded font-mono text-sm overflow-x-auto">
                <p>GET /distributors/offers - {{ _("Récupérer les offres disponibles") }}</p>
                <p>GET /distributors/offers/{id} - {{ _("Détails d'une offre spécifique") }}</p>
                <p>POST /distributors/transactions - {{ _("Créer une transaction") }}</p>
                <p>GET /distributors/transactions - {{ _("Lister les transactions") }}</p>
                <p>GET /distributors/transactions/{id} - {{ _("Détails d'une transaction") }}</p>
            </div>
        </div>
    </div>
</div>

<!-- Étape 3 -->
<div x-data="{ open: false }" class="border rounded-lg overflow-hidden mb-4">
    <div @click="open = !open" class="bg-orange-100 p-4 cursor-pointer flex justify-between items-center">
        <h3 class="text-lg font-semibold text-orange-700">{{ _("Étape 3 : Personnalisation des offres") }}</h3>
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v11.586l4.293-4.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 15.586V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 17a1 1 0 01-1-1V4.414l-4.293 4.293a1 1 0 11-1.414-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 11-1.414 1.414L11 4.414V16a1 1 0 01-1 1z" clip-rule="evenodd" />
        </svg>
    </div>
    <div x-show="open" class="p-6 bg-white">
        <p class="text-gray-700 mb-4">
            {{ _("La personnalisation des offres permet au distributeur d'adapter les offres fournies par Orange selon ses besoins commerciaux spécifiques, tout en conservant une transparence totale sur les prix et les marges appliquées.") }}
        </p>
        
        <h4 class="text-md font-semibold text-gray-800 mt-4 mb-3">{{ _("Pourquoi personnaliser les offres ?") }}</h4>
        <ul class="list-disc list-inside text-gray-700 mb-5 space-y-1">
            <li>{{ _("Mieux adapter les offres aux attentes des clients finaux") }}</li>
            <li>{{ _("Améliorer son positionnement commercial avec des offres différenciantes") }}</li>
            <li>{{ _("Ajuster librement les prix finaux en ajoutant des frais additionnels") }}</li>
        </ul>
        
        <h4 class="text-md font-semibold text-gray-800 mt-6 mb-3">{{ _("Paramètres personnalisables") }}</h4>
        
        <div class="border-l-4 border-orange-300 pl-4 mb-4">
            <h5 class="font-medium text-gray-800 mb-1">1. {{ _("Nom") }} (<code>name</code>)</h5>
            <p class="text-gray-700 text-sm mb-2">
                {{ _("Modifiez le nom par défaut de l'offre pour refléter votre marque ou stratégie commerciale.") }}
            </p>
            <div class="bg-gray-100 p-3 rounded text-sm">
                <p><strong>{{ _("Exemple :") }}</strong></p>
                <p>{{ _("Nom initial: Topup 10 € avec données") }}</p>
                <p>{{ _("Nom personnalisé: Offre vacances 10 €") }}</p>
            </div>
        </div>
        
        <div class="border-l-4 border-orange-300 pl-4 mb-4">
            <h5 class="font-medium text-gray-800 mb-1">2. {{ _("Frais additionnels") }} (<code>distributor_fees</code> et <code>distributor_fees_type</code>)</h5>
            <p class="text-gray-700 text-sm mb-2">
                {{ _("Définissez une marge commerciale additionnelle sur la valeur de revente initiale.") }}
            </p>
            <div class="bg-gray-100 p-3 rounded text-sm">
                <p><strong>{{ _("Types de frais") }} :</strong></p>
                <p>- {{ _("Frais fixes") }} : {{ _("montant précis ajouté au prix initial") }}</p>
                <p>- {{ _("Frais en pourcentage") }} : {{ _("pourcentage appliqué au prix initial") }}</p>
                <p></p>
                <p><strong>{{ _("Exemple concret") }} :</strong></p>
                <p>- {{ _("Valeur initiale") }} : 10 €</p>
                <p>- {{ _("Avec frais fixe de 2 €") }} : {{ _("prix final de 12 €") }}</p>
                <p>- {{ _("Avec frais de 10 pour cent") }} : {{ _("prix final de 11 €") }}</p>
            </div>
        </div>
        
        <div class="border-l-4 border-orange-300 pl-4 mb-4">
            <h5 class="font-medium text-gray-800 mb-1">3. {{ _("Métadonnées personnalisées") }} (<code>metadata</code>)</h5>
            <p class="text-gray-700 text-sm mb-2">
                {{ _("Informations supplémentaires associées librement aux offres pour des besoins internes ou marketing.") }}
            </p>
            <div class="bg-gray-100 p-3 rounded text-sm">
                <p><strong>{{ _("Exemple :") }}</strong></p>
                <p><code>"metadata": {"promo été 2025 limitée"}</code></p>
            </div>
        </div>
        
        <h4 class="text-md font-semibold text-gray-800 mt-6 mb-3">{{ _("Exemple technique de personnalisation") }}</h4>
        
        <div class="bg-gray-800 text-green-300 p-4 rounded-lg mb-4 font-mono text-sm overflow-x-auto">
            <p>PATCH /distributors/offers/{offer_id}</p>
            <p>{</p>
            <p>&nbsp;&nbsp;"name": "{{ _("Mon offre personnalisée") }}",</p>
            <p>&nbsp;&nbsp;"distributor_fees": 3.0,</p>
            <p>&nbsp;&nbsp;"distributor_fees_type": "{{ _("percent") }}",</p>
            <p>&nbsp;&nbsp;"metadata": "{{ _("Infos complémentaires personnalisées") }}"</p>
            <p>}</p>
        </div>
        
        <div class="bg-blue-50 border-l-4 border-blue-500 p-4">
            <h5 class="text-blue-700 font-medium mb-1">{{ _("Schema OpenAPI") }}</h5>
            <p class="text-gray-700 text-sm">
                {{ _("Selon la documentation, la personnalisation de l'offre utilise le schema") }} <code>OfferEditableParameters</code> {{ _("qui définit les champs modifiables.") }}
            </p>
        </div>
    </div>
</div>

<!-- Étape 4 -->
<div x-data="{ open: false }" class="border rounded-lg overflow-hidden mb-4">
    <div @click="open = !open" class="bg-orange-100 p-4 cursor-pointer flex justify-between items-center">
        <h3 class="text-lg font-semibold text-orange-700">{{ _("Étape 4 : Gestion des prix") }}</h3>
        <svg x-show="!open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v11.586l4.293-4.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 15.586V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        <svg x-show="open" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 17a1 1 0 01-1-1V4.414l-4.293 4.293a1 1 0 11-1.414-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 11-1.414 1.414L11 4.414V16a1 1 0 01-1 1z" clip-rule="evenodd" />
        </svg>
    </div>
    <div x-show="open" class="p-6 bg-white">
        <p class="text-gray-700 mb-4">
            {{ _("La gestion des prix est un aspect crucial de l'intégration avec l'API Orange Travel B2B. Cette étape explique les différents types de prix et comment ils sont calculés.") }}
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <!-- Valeur affichée -->
            <div class="bg-green-50 p-4 rounded-lg">
                <h5 class="font-semibold text-green-700 mb-2">{{ _("Valeur affichée") }}</h5>
                <p class="text-sm text-gray-700">
                    {{ _("Prix public indicatif qui peut être affiché au client final. Ce prix est une référence, mais le distributeur a la liberté de définir son propre prix de vente.") }}
                </p>
            </div>
            
            <!-- Valeur de revente -->
            <div class="bg-blue-50 p-4 rounded-lg">
                <h5 class="font-semibold text-blue-700 mb-2">{{ _("Valeur de revente (resell_value)") }}</h5>
                <p class="text-sm text-gray-700">
                    {{ _("Prix facturé au distributeur par Orange. C'est la base sur laquelle le distributeur peut ajouter ses propres frais pour déterminer le prix final.") }}
                </p>
            </div>
        </div>
        
        <h4 class="text-md font-semibold text-gray-800 mt-6 mb-3">{{ _("Calcul du prix final") }}</h4>
        
        <div class="bg-gray-100 p-4 rounded-lg mb-6">
            <h5 class="font-medium text-gray-800 mb-2">{{ _("Exemple de calcul") }}</h5>
            <ol class="list-decimal list-inside text-gray-700 space-y-2">
                <li>{{ _("Valeur de revente (définie par Orange)") }} : 10 €</li>
                <li>{{ _("Ajout de frais fixe de 2 €") }} : 10 € + 2 € = 12 €</li>
                <li>{{ _("Ou ajout de frais en pourcentage de 15 pour cent") }} : 10 € + (10 € × 15%) = 11.5 €</li>
                <li>{{ _("Le prix final est celui qui sera facturé au client") }}</li>
            </ol>
        </div>
        
        <div class="bg-gray-800 text-green-300 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto">
            <p># {{ _("Exemple de réponse de l'API pour une offre avec les prix") }}</p>
            <p>{</p>
            <p>&nbsp;&nbsp;"id": "7aeaff64-573f-45ec-b3fc-2c9e3f66efae",</p>
            <p>&nbsp;&nbsp;"name": "{{ _("Europe 10 Go") }}",</p>
            <p>&nbsp;&nbsp;"resell_value": 10.99,</p>
            <p>&nbsp;&nbsp;"distributor_fees": 2.00,</p>
            <p>&nbsp;&nbsp;"distributor_fees_type": "{{ _("value") }}",</p>
            <p>&nbsp;&nbsp;...</p>
            <p>}</p>
        </div>
        
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
            <h5 class="text-yellow-700 font-medium mb-2">{{ _("Points importants à retenir") }}</h5>
            <ul class="list-disc list-inside text-gray-700 text-sm space-y-1">
                <li>{{ _("La valeur de revente (resell_value) est fixée par Orange") }}</li>
                <li>{{ _("Les frais additionnels sont à la discrétion du distributeur") }}</li>
                <li>{{ _("L'API fournit toujours les informations de prix dans la devise de référence (EUR)") }}</li>
                <li>{{ _("Des taux de change sont disponibles pour afficher les prix en devises locales") }}</li>
            </ul>
        </div>
    </div>
</div>
